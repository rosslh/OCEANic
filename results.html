<head>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>OCEANic Results</title>
    <link rel="icon" type="x-icon" href="icon.png">
    <link rel="shortcut icon" type="x-icon" href="icon.png">
    <meta charset="utf-8">
</head>
<!-- <script type="application/javascript" src="ideologies.js"> -->
</script>

<body>
    <h1>OCEANic</h1>
    <hr>

    <h1>Results</h1>

    <h2 class="axisHeading">Openness to Experience Axis:</h2>
    <div class="axis">
        <div class="label">
            Curious
        </div>
        <div class="bar curious" id="bar-curious">
            <div class="text-wrapper" id="curious"></div>
        </div>
        <div class="bar prudent" id="bar-prudent">
            <div class="text-wrapper" id="prudent"></div>
        </div>
        <div class="label">
            Prudent
        </div>
    </div>
    <h2 class="axisHeading">Conscientiousness Axis:</h2>
    <div class="axis">
        <div class="label">
            Organized
        </div>
        <div class="bar organized" id="bar-organized">
            <div class="text-wrapper" id="organized"></div>
        </div>
        <div class="bar carefree" id="bar-carefree">
            <div class="text-wrapper" id="carefree"></div>
        </div>
        <div class="label">
            Carefree
        </div>
    </div>
    <h2 class="axisHeading">Extraversion Axis:</h2>
    <div class="axis">
        <div class="label">
            Outgoing
        </div>
        <div class="bar outgoing" id="bar-outgoing">
            <div class="text-wrapper" id="outgoing"></div>
        </div>
        <div class="bar reserved" id="bar-reserved">
            <div class="text-wrapper" id="reserved"></div>
        </div>
        <div class="label">
            Reserved
        </div>
    </div>
    <h2 class="axisHeading">Agreeableness Axis:</h2>
    <div class="axis">
        <div class="label">
            Sympathetic
        </div>
        <div class="bar sympathetic" id="bar-sympathetic">
            <div class="text-wrapper" id="sympathetic"></div>
        </div>
        <div class="bar competitive" id="bar-competitive">
            <div class="text-wrapper" id="competitive"></div>
        </div>
        <div class="label">
            Competitive
        </div>
    </div>
    <h2 class="axisHeading">Neuroticism Axis:</h2>
    <div class="axis">
        <div class="label">
            Sensitive
        </div>
        <div class="bar sensitive" id="bar-sensitive">
            <div class="text-wrapper" id="sensitive"></div>
        </div>
        <div class="bar resilient" id="bar-resilient">
            <div class="text-wrapper" id="resilient"></div>
        </div>
        <div class="label">
            Resilient
        </div>
    </div>
    <h2 id="personalityType"></h2>
    <img src="" id="banner">
    <button class="button" onclick="location.href='index.html';" style="background-color: #2196f3;">Back</button> <br>
    <script>
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1)
            var vars = query.split("&")
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=")
                if (pair[0] == variable) { return pair[1] }
            }
            return (NaN);
        }

        function setBarValue(name, value) {
            innerel = document.getElementById(name)
            outerel = document.getElementById("bar-" + name)
            outerel.style.width = (value + "%")
            innerel.innerHTML = (value + "%")
            if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
                innerel.style.visibility = "hidden"
            }
        }
        curious = getQueryVariable("o")
        organized = getQueryVariable("c")
        outgoing = getQueryVariable("e")
        sympathetic = getQueryVariable("a")
        sensitive = getQueryVariable("n")
        prudent = (100 - curious).toFixed(1)
        carefree = (100 - organized).toFixed(1)
        reserved = (100 - outgoing).toFixed(1)
        competitive = (100 - sympathetic).toFixed(1)
        resilient = (100 - sensitive).toFixed(1)

        setBarValue("curious", curious)
        setBarValue("prudent", prudent)
        setBarValue("carefree", carefree)
        setBarValue("organized", organized)
        setBarValue("outgoing", outgoing)
        setBarValue("reserved", reserved)
        setBarValue("competitive", competitive)
        setBarValue("sympathetic", sympathetic)
        setBarValue("sensitive", sensitive)
        setBarValue("resilient", resilient)

        window.onload = function () {
            var c = document.createElement("canvas")
            var ctx = c.getContext("2d")
            c.width = 800;
            c.height = 840;
            ctx.fillStyle = "#EEEEEE"
            ctx.fillRect(0, 0, 800, 770);

            ctx.fillStyle = "#222222"
            ctx.fillRect(16, 180, 768, 80)
            ctx.fillRect(16, 320, 768, 80)
            ctx.fillRect(16, 460, 768, 80)
            ctx.fillRect(16, 600, 768, 80)
            ctx.fillRect(16, 740, 768, 80)
            ctx.font = "33px Montserrat"

            ctx.fillStyle = "#222222"
            ctx.textAlign = "left"
            ctx.fillText("Curious", 20, 169)
            ctx.textAlign = "right"
            ctx.fillText("Prudent", 780, 169)
            ctx.fillStyle = "#f44336"
            ctx.fillRect(20, 184, 7.6 * curious - 2, 72)
            ctx.fillStyle = "#00897b"
            ctx.fillRect(782 - 7.6 * prudent, 184, 7.6 * prudent - 2, 72)

            ctx.fillStyle = "#222222"
            ctx.textAlign = "left"
            ctx.fillText("Organized", 20, 309)
            ctx.textAlign = "right"
            ctx.fillText("Carefree", 780, 309)
            ctx.fillStyle = "#ffeb3b"
            ctx.fillRect(20, 324, 7.6 * organized - 2, 72)
            ctx.fillStyle = "#3f51b5"
            ctx.fillRect(782 - 7.6 * carefree, 324, 7.6 * carefree - 2, 72)

            ctx.fillStyle = "#222222"
            ctx.textAlign = "left"
            ctx.fillText("Outgoing", 20, 449)
            ctx.textAlign = "right"
            ctx.fillText("Reserved", 780, 449)
            ctx.fillStyle = "#03a9f4"
            ctx.fillRect(20, 464, 7.6 * outgoing - 2, 72)
            ctx.fillStyle = "#ff9800"
            ctx.fillRect(782 - 7.6 * reserved, 464, 7.6 * reserved - 2, 72)

            ctx.fillStyle = "#222222"
            ctx.textAlign = "left"
            ctx.fillText("Sympathetic", 20, 589)
            ctx.textAlign = "right"
            ctx.fillText("Competitive", 780, 589)
            ctx.fillStyle = "#9c27b0"
            ctx.fillRect(20, 604, 7.6 * sympathetic - 2, 72)
            ctx.fillStyle = "#8bc34a"
            ctx.fillRect(782 - 7.6 * competitive, 604, 7.6 * competitive - 2, 72)

            ctx.fillStyle = "#222222"
            ctx.textAlign = "left"
            ctx.fillText("Sensitive", 20, 729)
            ctx.textAlign = "right"
            ctx.fillText("Resilient", 780, 729)
            ctx.fillStyle = "#9c27b0"
            ctx.fillRect(20, 744, 7.6 * sensitive - 2, 72)
            ctx.fillStyle = "#8bc34a"
            ctx.fillRect(782 - 7.6 * resilient, 744, 7.6 * resilient - 2, 72)

            ctx.fillStyle = "#222222"
            ctx.font = "700 80px Montserrat"
            ctx.textAlign = "left"
            ctx.fillText("OCEANic", 20, 90)
            ctx.font = "50px Montserrat"

            ctx.textAlign = "left"
            if (curious > 30) { ctx.fillText(curious + "%", 130, 237.5) }
            if (organized > 30) { ctx.fillText(organized + "%", 130, 377.5) }
            if (outgoing > 30) { ctx.fillText(outgoing + "%", 130, 517.5) }
            if (sympathetic > 30) { ctx.fillText(sympathetic + "%", 130, 657.5) }
            if (sensitive > 30) { ctx.fillText(sensitive + "%", 130, 797.5) }
            ctx.textAlign = "right"
            if (prudent > 30) { ctx.fillText(prudent + "%", 670, 237.5) }
            if (carefree > 30) { ctx.fillText(carefree + "%", 670, 377.5) }
            if (reserved > 30) { ctx.fillText(reserved + "%", 670, 517.5) }
            if (competitive > 30) { ctx.fillText(competitive + "%", 670, 657.5) }
            if (resilient > 30) { ctx.fillText(resilient + "%", 670, 797.5) }

            const resultLabel = `Personality type: ${curious > prudent ? "C" : "P"}${organized > carefree ? "O" : "C"}${outgoing > reserved ? "O" : "R"}${sympathetic > competitive ? "S" : "C"}${sensitive > resilient ? "S" : "R"}`

            ctx.font = "300 30px Montserrat"
            ctx.fillText("rosslh.github.io/OCEANic", 780, 60)
            ctx.fillText(resultLabel, 780, 95)
            document.getElementById("personalityType").innerText = resultLabel;
            ctx.textAlign = "center"

            document.getElementById("banner").src = c.toDataURL();
        }
    </script>
</body>